<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mariemâ€™s 12-Week Glow-Up Tracker âœ¨</title>

<!-- PWA manifest and theme color -->
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#5a2a57" />

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  body {
    font-family: 'Poppins', sans-serif;
    background: #fff0f6;
    color: #5a2a57;
    margin: 0; padding: 0;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh;
  }
  header {
    padding: 20px 10px;
    font-weight: 600;
    font-size: 1.8rem;
    text-align: center;
    letter-spacing: 0.05em;
  }
  .week-container {
    width: 95vw; max-width: 400px;
    background: #f9d5e5;
    margin-bottom: 15px;
    border-radius: 15px;
    box-shadow: 0 6px 12px rgb(90 42 87 / 0.3);
    padding: 15px;
    display: flex; flex-direction: column; align-items: center;
  }
  .week-title {
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 10px;
    text-align: center;
  }
  input[type="file"] {
    display: none;
  }
  label.upload-btn {
    background: #b85c9e;
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    cursor: pointer;
    user-select: none;
    margin-bottom: 10px;
    transition: background 0.3s ease;
  }
  label.upload-btn:hover {
    background: #91397d;
  }
  .save-week-btn {
    margin-left: 10px;
    background: #7a378b;
    color: white;
    border: none;
    padding: 6px 14px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: background 0.3s ease;
  }
  .save-week-btn:hover {
    background: #5a2a57;
  }
  img.preview {
    max-width: 100%;
    max-height: 250px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgb(90 42 87 / 0.2);
    margin-bottom: 10px;
    object-fit: cover;
  }
  textarea.quote {
    width: 100%;
    resize: none;
    border-radius: 10px;
    border: 1px solid #b85c9e;
    padding: 8px;
    font-size: 1rem;
    font-family: 'Poppins', sans-serif;
    color: #5a2a57;
    background: #fff0f6;
  }
  .save-btn {
    background: #5a2a57;
    color: #fff0f6;
    padding: 12px 25px;
    font-weight: 600;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    margin: 20px 0 40px;
    transition: background 0.3s ease;
  }
  .save-btn:hover {
    background: #7d4977;
  }
  footer {
    text-align: center;
    padding: 10px 5px;
    font-size: 0.9rem;
    color: #5a2a57aa;
  }
  .upload-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
</style>
</head>
<body>

<header>Mariemâ€™s 12-Week Endolift Glow-Up Tracker âœ¨</header>

<form id="trackerForm">
  <div id="weeksContainer"></div>

  <button type="button" class="save-btn" onclick="saveData()">Save All Progress ðŸ’¾</button>
</form>

<footer>Keep shining, Mariem! ðŸ’–</footer>

<script>
  const weeksContainer = document.getElementById('weeksContainer');

  const defaultQuotes = [
    "Every change begins with courage â€” your glow starts now.",
    "Renewed inside and out, your beauty is unfolding.",
    "Small steps, big transformation â€” keep shining.",
    "Healing is your superpower; embrace the process.",
    "Strength grows through every challenge you overcome.",
    "Confidence blooms with each passing week.",
    "Radiate beauty from your soul to your skin.",
    "Your journey is a masterpiece in progress.",
    "Patience fuels the best transformations.",
    "Glow isnâ€™t just skin deep â€” itâ€™s your spirit rising.",
    "Trust the process; your reflection will thank you.",
    "You are radiant, resilient, and unstoppable."
  ];

  function formatDate(date) {
    return date.toLocaleDateString(undefined, { day: 'numeric', month: 'short' });
  }

  function getWeekDateRange(startDate, weekNumber) {
    const start = new Date(startDate);
    start.setDate(start.getDate() + (weekNumber - 1) * 7);
    const end = new Date(start);
    end.setDate(end.getDate() + 6);
    return `${formatDate(start)} â€“ ${formatDate(end)}`;
  }

  for(let i=1; i<=12; i++) {
    const range = getWeekDateRange(new Date('2025-06-18'), i);
    const weekDiv = document.createElement('div');
    weekDiv.className = 'week-container';
    weekDiv.innerHTML = `
      <div class="week-title">Week ${i} (${range})</div>
      <div class="upload-row">
        <label class="upload-btn" for="photo${i}">Upload Photo ðŸ“¸</label>
        <input type="file" id="photo${i}" accept="image/*" onchange="previewImage(event, ${i})" />
        <button type="button" class="save-week-btn" onclick="saveWeek(${i})">Save This Week ðŸ’¾</button>
      </div>
      <img id="preview${i}" class="preview" src="" alt="No photo yet" style="display:none;" />
      <textarea class="quote" id="quote${i}" rows="2" placeholder="Write your motivational quote or use this:">${defaultQuotes[i-1]}</textarea>
    `;
    weeksContainer.appendChild(weekDiv);
  }

  function previewImage(event, week) {
    const preview = document.getElementById('preview' + week);
    const file = event.target.files[0];
    if(file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.style.display = 'block';
      }
      reader.readAsDataURL(file);
    } else {
      preview.src = '';
      preview.style.display = 'none';
    }
  }

  function saveWeek(week) {
    let data = JSON.parse(localStorage.getItem('mariemGlowUpData')) || [];

    const quoteInput = document.getElementById('quote' + week);
    const imgPreview = document.getElementById('preview' + week);
    const imgSrc = imgPreview.src || '';

    const index = data.findIndex(d => d.week === week);
    const entry = { week: week, photo: imgSrc, quote: quoteInput.value };

    if (index > -1) data[index] = entry;
    else data.push(entry);

    localStorage.setItem('mariemGlowUpData', JSON.stringify(data));
    alert(`Week ${week} saved! ðŸ’¾`);
  }

  function saveData() {
    let data = [];
    for(let i=1; i<=12; i++) {
      const quoteInput = document.getElementById('quote' + i);
      const imgPreview = document.getElementById('preview' + i);
      const imgSrc = imgPreview.src || '';

      data.push({
        week: i,
        photo: imgSrc,
        quote: quoteInput.value
      });
    }
    localStorage.setItem('mariemGlowUpData', JSON.stringify(data));
    alert('All progress saved! ðŸ’¾');
  }

  function loadData() {
    const saved = localStorage.getItem('mariemGlowUpData');
    if(saved) {
      const data = JSON.parse(saved);
      data.forEach(item => {
        if(item.photo) {
          const preview = document.getElementById('preview' + item.week);
          preview.src = item.photo;
          preview.style.display = 'block';
        }
        document.getElementById('quote' + item.week).value = item.quote || '';
      });
    }
  }

  loadData();
</script>

<!-- Register service worker for offline caching -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker registered'))
      .catch(err => console.log('Service Worker registration failed:', err));
  }
</script>

</body>
</html>
